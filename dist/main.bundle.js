document.addEventListener("DOMContentLoaded",(()=>{const e=document.getElementById("login-form"),t=document.getElementById("logout-form"),n=document.getElementById("submit"),o=document.getElementById("logout"),r=document.getElementById("describer");function s(n){e.style.display="none",t.style.display="block",r.innerText=`Welcome, ${n}`}function m(n){e.style.display="block",t.style.display="none",r.innerText=n||""}chrome.runtime.sendMessage({type:"GET_AUTH_STATE"},(e=>{e?.authenticated?s(e.email):m(null)})),console.log("Salam"),n.addEventListener("click",(()=>{const e=document.getElementById("email").value,t=document.getElementById("password").value;chrome.runtime.sendMessage({type:"authenticate",email:e,password:t},(t=>{if(chrome.runtime.lastError)return r.innerText="Runtime error: "+chrome.runtime.lastError.message,void m("Runtime error: "+chrome.runtime.lastError.message);t?t.success?s(e):m(`Something happened wrong ${t.message}`):m("No response from background")}))})),o.addEventListener("click",(()=>{chrome.runtime.sendMessage({type:"logout"},(e=>{r.innerText=e.message||"Logged out",m()}))}))}));